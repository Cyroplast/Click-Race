<!DOCTYPE html>
<html lang="en">
<head>
    <title>Click Race!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta charset="utf-8">
<!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<style>
#canvas1 {
    border: 7px solid red;
    background-color: #f1f1f1;
    width: 100%;
    height: 900px;
    margin-bottom: -363px;
    column-fill: auto;

}


body::-webkit-scrollbar {
  display: none;
}


/* Hide scrollbar for IE, Edge and Firefox */
body {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}
</style>
</head>
<body onload="startGame()">
   <section id="GameArea">
    <div class="row">

      <div> <canvas id="canvas1" onclick="move()"></canvas></div>
    </div>
   </section>
    <script>



        var myGamePiece;
        var cps = 0;
        document.getElementById("canvas1").style.height = screen.height;

        function startGame() {
            PlayerRed = new component(20, 20, "red", 10, 120);
            Bot = new component(20, 20, "blue", 10, 160);
            myGameArea.start();
        }
        
        var myGameArea = {
            canvas : document.getElementById("canvas1"),
            start : function() {
                setInterval(function(){
                    if(started == 0){ctx.font = "50px Arial";
                   ctx.fillText("Click Anywhere To Play", 230, 50);}
                },0.5);
                this.canvas.width = 900;
                this.canvas.height = 600;
                this.context = this.canvas.getContext("2d");
                document.body.insertBefore(this.canvas, document.body.childNodes[0]);
                this.interval = setInterval(updateGameArea, 20);
                window.addEventListener('keydown', function (e) {
                    myGameArea.keys = (myGameArea.keys || []);
                    myGameArea.keys[e.keyCode] = (e.type == "keydown");
                })
                window.addEventListener('keyup', function (e) {
                    myGameArea.keys[e.keyCode] = (e.type == "keyup");            
                })
            }, 
            clear : function(){
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
            },
  stop : function() {
    clearInterval(this.interval);
  }
        }
        
        function component(width, height, color, x, y) {
            this.gamearea = myGameArea;
            this.width = width;
            this.height = height;
            this.speedX = 0;  
            this.x = x;
            this.y = y;    
            this.update = function() {
                ctx = myGameArea.context;
                ctx.fillStyle = color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }
            this.newPos = function() {
                this.x += this.speedX;        
            }    
        }
         var started = 0;
         var secs = 0;
         var clicks = 0;
        function move(){
            if (started == 0){
                started = 1;
                setInterval(function(){
                secs++;
            },1000);
            }

    
            setTimeout(function(){
                cps = 0;
            },100);
            cps = cps +2;
            clicks= clicks + 1;
            

            
            
            
        
        }
        
        function updateGameArea() {
            myGameArea.clear();
            PlayerRed.speedX = cps;   
            if (started == 1){
                Bot.speedX = 0.9;
            }
            PlayerRed.newPos();    
            PlayerRed.update();
            Bot.newPos();    
            Bot.update();
            
            if ( PlayerRed.x >= 870){
                 myGameArea.stop();
                 ctx.font = "30px Comic Sans MS";
                 if (secs > 0){
                    ctx.fillText(Math.round((clicks/secs + Number.EPSILON) * 100) / 100 + " CPS", 10, 50);
                    window.alert("You have defeated the Bot with "+Math.round((clicks/secs + Number.EPSILON) * 100) / 100 +" CPS!"+ " Would you like to play another game?");
                    clicks =0;
                 }
                
                
            } else if (Bot.x >= 870){
                       myGameArea.stop();
                       ctx.font = "20px Comic Sans MS";
                       if (secs > 0){
                    ctx.fillText("You have been defeated by the Bot!   Reload the page if you think you can win next time.", 10, 50);
                    clicks =0;
                 } 
                }
        }
        
        </script>
</body>
</html>
